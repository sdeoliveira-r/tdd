# Technical Design Document (TDD) - Export Proposals as PDF and DOCX

**Version:** 1.1

**Date:** May 7, 2025

**Author:** Rafael

**Reviewers:** Development Team

**Project:** TheFuture

## 1. Objective

To implement the capability to export proposals (generated by AI or created manually) to PDF and/or DOCX formats, utilizing a predefined brand layout. The objective is to ensure visual consistency in deliverables and enhance professional communication with clients.

## 2. Scope

- **Includes:**
    - Export icon on the proposal editing screen.
    - Modal for format selection (PDF and/or DOCX).
    - Generation of files with a predefined standard layout.
    - Support for download and email sending.
    - Compatibility with mobile and desktop devices.

- **Does not include:**
    - Integration with external APIs for file storage.
    - User-based layout customization (beyond the previously defined brand standard).

## 3. Technical Description

1. Add an export icon next to the proposal edit icon.
2. Open a modal upon clicking the export icon, with format selection (PDF and/or DOCX).
3. Render the proposal as HTML on the client or server, following the predefined standard layout.
4. Suggested libraries for file generation:
    - Generate PDF: Puppeteer, pdf-lib, jsPDF
    - Generate DOCX: npm docx, PandaDoc (optional, assess costs)
5. Allow immediate download and email sending of the proposal in PDF and/or DOCX directly from the modal.
6. Ensure compatibility with desktops, mobile devices, and responsiveness.
7. Validate the implementation's performance, compatibility, and robustness.

## 4. Acceptance Criteria

- The export icon is present and functional for the user.
- The modal allows selection of the proposal in PDF and/or DOCX format.
- Files adhere to the predefined brand layout.
- Proposals include: header, client, items, notes, footer.
- Functionality is responsive on desktop and mobile.
- Supports download and email sending.
- Code is optimized, validated, and reviewed.

## 5. Risks and Dependencies

- Dependence on external libraries for file generation (assess costs).
- Risks of visual inconsistency between formats.
- Compatibility with browsers and mobile devices.
- Configuration of the email service.

## 6. Important Additional Topics

- **Error Handling:** Define how errors during the export process will be handled and how the user will be notified.
- **Security:** Consider security aspects, especially if sensitive information is included in the proposals and sent via email.
- **Accessibility:** Ensure that the generated PDF files are accessible by following PDF accessibility guidelines.

## 7. Version History

| Version | Date       | Changes                                                                 | Author  |
|---------|------------|-------------------------------------------------------------------------|---------|
| 1.0     | 05/07/2025 | Initial document creation                                               | Rafael  |
| 1.1     | 05/07/2025 | Updated Version History for English translation.                        | Rafael  |

# Technical Design Document (TDD) - Exportar Propostas como PDF e DOCX

**Versão:** 1.0

**Data:** 07/05/2025

**Autor:** Rafael

**Revisores:** Equipe de Desenvolvimento

**Projeto:** TheFuture



## 1. Objetivo

Implementar a capacidade de exportar propostas (geradas por IA ou criadas manualmente) para os formatos PDF e/ou DOCX, utilizando um layout de marca predefinido. O objetivo é garantir consistência visual nas entregas e aprimorar a comunicação profissional com os clientes.

## 2. Escopo

- Inclui:
  - Ícone de exportação na tela de edição da proposta;
  - Modal para seleção de formato (PDF e/ou DOCX);
  - Geração de arquivos com layout padrão predefinido;
  - Suporte a download e envio por e-mail;
  - Compatibilidade com dispositivos móveis e desktops.

- Não inclui:
  - Integração com APIs externas para armazenamento de arquivos.
  - Personalização de layout por usuário (além do padrão da marca predefinido anteriormente).

## 3. Descrição Técnica

1. Adicionar ícone de exportação ao lado do ícone de edição da proposta.
2. Abrir modal ao clicar no ícone de exportação, com seleção de formatos (PDF e/ou DOCX).
3. Renderizar proposta como HTML no cliente ou servidor, seguindo o layout padrão predefinido.
4. Sugestão de bibliotecas para gerar arquivos:
   - Gerar PDF: Puppeteer, pdf-lib, jsPDF
   - Gerar DOCX: npm docx, PandaDoc (opcional viabilizar custos)
5. Permitir download imediato e envio por e-mail da proposta em PDF e/ou DOCX direto do modal.
6. Garantir compatibilidade com desktops, dispositivos móveis e responsividade.
7. Validar desempenho, compatibilidade e robustez da implementação.

## 4. Critérios de Aceitação

- O ícone de exportação está presente e funcional ao usuário.
- Modal permite seleção da proposta no formato PDF e/ou DOCX.
- Arquivos seguem layout da marca predefinido.
- Propostas incluem: cabeçalho, cliente, itens, notas, rodapé.
- Funcionalidade responsiva em desktop e mobile.
- Suporte a download e envio por e-mail.
- Código otimizado, validado e revisado.

## 5. Riscos ou Dependências

- Dependência de bibliotecas externas para geração de arquivos (viabilizar custos).
- Riscos de inconsistência visual entre formatos.
- Compatibilidade com navegadores e dispositivos móveis.
- Configuração de serviço de e-mail.

## 6. Tópicos Adicionais Importantes

- **Tratamento de Erros:** Definir como os erros durante o processo de exportação serão tratados e como o usuário será notificado.
- **Segurança:** Considerar aspectos de segurança, especialmente se informações sensíveis forem incluídas nas propostas e enviadas por e-mail.
- **Acessibilidade:** Garantir que os arquivos PDF gerados sejam acessíveis seguindo as diretrizes de acessibilidade para documentos PDF.

## 7. Histórico de Versões

| Versão | Data       | Alterações                      | Autor         |
|--------|------------|----------------------------------|---------------|
| 1.0    | 07/05/2025 | Criação inicial do documento     | Rafael  |
